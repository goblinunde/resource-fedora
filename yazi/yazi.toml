# Yazi æ–‡ä»¶ç®¡ç†å™¨é…ç½®æ–‡ä»¶
# é…ç½®æ–‡æ¡£: https://yazi-rs.github.io/docs/configuration/yazi
# Schema éªŒè¯: https://yazi-rs.github.io/schemas/yazi.json

"$schema" = "https://yazi-rs.github.io/schemas/yazi.json"

# ===== æ–‡ä»¶ç®¡ç†å™¨è®¾ç½® [mgr] =====
[mgr]
# ğŸ’¡ çª—å£å¸ƒå±€æ¯”ä¾‹ [çˆ¶ç›®å½•:å½“å‰ç›®å½•:é¢„è§ˆçª—å£]
ratio = [1, 4, 3]

# ğŸ’¡ æ–‡ä»¶æ’åºæ–¹å¼
# å¯é€‰å€¼: "alphabetical" | "created" | "modified" | "natural" | "size" | "extension"
sort_by = "alphabetical"

# ğŸ’¡ æ’åºæ˜¯å¦åŒºåˆ†å¤§å°å†™
sort_sensitive = false

# ğŸ’¡ æ˜¯å¦åå‘æ’åº
sort_reverse = false

# ğŸ’¡ ç›®å½•æ˜¯å¦ä¼˜å…ˆæ˜¾ç¤º
sort_dir_first = true

# ğŸ’¡ æ˜¯å¦ä½¿ç”¨éŸ³è¯‘æ’åº(å¯¹éæ‹‰ä¸å­—ç¬¦å‹å¥½)
sort_translit = false

# ğŸ’¡ è¡Œæ¨¡å¼æ˜¾ç¤º - æ˜¾ç¤ºæ–‡ä»¶å…ƒä¿¡æ¯çš„æ–¹å¼
# å¯é€‰å€¼: "none" | "size" | "permissions" | "mtime"
linemode = "none"

# ğŸ’¡ æ˜¯å¦æ˜¾ç¤ºéšè—æ–‡ä»¶(ä»¥ . å¼€å¤´çš„æ–‡ä»¶)
show_hidden = false

# ğŸ’¡ æ˜¯å¦æ˜¾ç¤ºç¬¦å·é“¾æ¥çš„ç›®æ ‡
show_symlink = true

# ğŸ’¡ æ»šåŠ¨åç§»é‡ - å…‰æ ‡è·ç¦»çª—å£è¾¹ç¼˜çš„æœ€å°è¡Œæ•°
scrolloff = 5

# ğŸ’¡ é¼ æ ‡äº‹ä»¶æ”¯æŒ
mouse_events = ["click", "scroll"]

# ğŸ’¡ çª—å£æ ‡é¢˜æ ¼å¼ ({cwd} è¡¨ç¤ºå½“å‰å·¥ä½œç›®å½•)
title_format = "Yazi: {cwd}"

# ===== é¢„è§ˆçª—å£è®¾ç½® [preview] =====
[preview]
# ğŸ’¡ æ–‡æœ¬æ¢è¡Œæ–¹å¼
# å¯é€‰å€¼: "no" | "wrap"
wrap = "no"

# ğŸ’¡ Tab ç¼©è¿›å¤§å°
tab_size = 2

# ğŸ’¡ é¢„è§ˆçª—å£æœ€å¤§å®½åº¦(åƒç´ )
max_width = 600

# ğŸ’¡ é¢„è§ˆçª—å£æœ€å¤§é«˜åº¦(åƒç´ )
max_height = 900

# ğŸ’¡ é¢„è§ˆç¼“å­˜ç›®å½•(ç•™ç©ºä½¿ç”¨ç³»ç»Ÿé»˜è®¤)
cache_dir = ""

# ğŸ’¡ å›¾ç‰‡é¢„è§ˆå»¶è¿Ÿ(æ¯«ç§’) - é˜²æ­¢å¿«é€Ÿæµè§ˆæ—¶é¢‘ç¹åŠ è½½å›¾ç‰‡
image_delay = 30

# ğŸ’¡ å›¾ç‰‡ç¼©æ”¾æ»¤é•œç®—æ³•
# å¯é€‰å€¼: "nearest" | "triangle" | "catmull-rom" | "gaussian" | "lanczos3"
image_filter = "triangle"

# ğŸ’¡ å›¾ç‰‡è´¨é‡(1-100)
image_quality = 75

# ğŸ’¡ ueberzug ç¼©æ”¾æ¯”ä¾‹(é€‚ç”¨äº Kitty/iTerm2 åè®®)
ueberzug_scale = 1

# ğŸ’¡ ueberzug åç§»é‡ [x, y, width, height]
ueberzug_offset = [0, 0, 0, 0]

# ===== æ–‡ä»¶æ‰“å¼€å™¨é…ç½® [opener] =====
[opener]
# ğŸ’¡ æ–‡æœ¬ç¼–è¾‘å™¨
edit = [
	{ run = '${EDITOR:-nvim} "$@"', desc = "$EDITOR", for = "unix", block = true },
]

# ğŸ’¡ åª’ä½“æ’­æ”¾å™¨
play = [
	{ run = 'mpv "$@"', desc = "æ’­æ”¾ (mpv)", for = "linux", orphan = true },
	{ run = 'mediainfo "$1"; echo "æŒ‰ Enter é€€å‡º"; read _', block = true, desc = "æ˜¾ç¤ºåª’ä½“ä¿¡æ¯", for = "unix" },
]

# ğŸ’¡ ç³»ç»Ÿé»˜è®¤æ‰“å¼€å™¨
open = [
	{ run = 'xdg-open "$@"', desc = "ç”¨ç³»ç»Ÿé»˜è®¤ç¨‹åºæ‰“å¼€", for = "linux" },
]

# ğŸ’¡ åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ˜¾ç¤º
reveal = [
	{ run = 'xdg-open "$(dirname "$1")"', desc = "åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­æ˜¾ç¤º", for = "linux" },
	{ run = 'exiftool "$1"; echo "æŒ‰ Enter é€€å‡º"; read _', desc = "æ˜¾ç¤º EXIF ä¿¡æ¯", for = "unix", block = true },
]

# ğŸ’¡ è§£å‹ç¼©
extract = [
	{ run = 'ya pub extract --list "$@"', desc = "è§£å‹åˆ°å½“å‰ç›®å½•" },
]

# ğŸ’¡ ä¸‹è½½æ–‡ä»¶
download = [
	{ run = 'ya emit download --open -- "$@"', desc = "ä¸‹è½½å¹¶æ‰“å¼€" },
	{ run = 'ya emit download -- "$@"', desc = "ä¸‹è½½" },
]

# ===== æ–‡ä»¶æ‰“å¼€è§„åˆ™ [open] =====
[open]
rules = [
	# æ–‡ä»¶å¤¹
	{ url = "*/", use = ["edit", "open", "reveal"] },
	
	# æ–‡æœ¬æ–‡ä»¶
	{ mime = "text/*", use = ["edit", "reveal"] },
	
	# å›¾ç‰‡æ–‡ä»¶
	{ mime = "image/*", use = ["open", "reveal"] },
	
	# éŸ³è§†é¢‘æ–‡ä»¶
	{ mime = "{audio,video}/*", use = ["play", "reveal"] },
	
	# å‹ç¼©åŒ…
	{ mime = "application/{zip,rar,7z*,tar,gzip,xz,zstd,bzip*,lzma,compress,archive,cpio,arj,xar,ms-cab*}", use = ["extract", "reveal"] },
	
	# JSON æ–‡ä»¶
	{ mime = "application/{json,ndjson}", use = ["edit", "reveal"] },
	{ mime = "*/javascript", use = ["edit", "reveal"] },
	
	# ç©ºæ–‡ä»¶
	{ mime = "inode/empty", use = ["edit", "reveal"] },
	
	# è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
	{ mime = "vfs/{absent,stale}", use = "download" },
	
	# é»˜è®¤è§„åˆ™
	{ url = "*", use = ["open", "reveal"] },
]

# ===== ä»»åŠ¡ç®¡ç†è®¾ç½® [tasks] =====
[tasks]
# ğŸ’¡ å¾®ä»»åŠ¡å·¥ä½œçº¿ç¨‹æ•°
micro_workers = 10

# ğŸ’¡ å®ä»»åŠ¡å·¥ä½œçº¿ç¨‹æ•°
macro_workers = 10

# ğŸ’¡ å¼‚å¸¸ä»»åŠ¡é‡è¯•æ¬¡æ•°
bizarre_retry = 3

# ğŸ’¡ å›¾ç‰‡é¢„åŠ è½½å†…å­˜åˆ†é… (512MB)
image_alloc = 536870912

# ğŸ’¡ å›¾ç‰‡è¾¹ç•Œ [æœ€å¤§å®½åº¦, æœ€å¤§é«˜åº¦]
image_bound = [10000, 10000]

# ğŸ’¡ æ˜¯å¦ç¦æ­¢é¢„åŠ è½½
suppress_preload = false

# ===== æ’ä»¶ç³»ç»Ÿé…ç½® [plugin] =====
[plugin]

# ----- MIME ç±»å‹è·å–å™¨ -----
fetchers = [
	# ğŸ’¡ åŸºäºæ–‡ä»¶æ‰©å±•åçš„ MIME ç±»å‹è¯†åˆ«(æ¯” file å‘½ä»¤æ›´å¿«ä½†ç²¾åº¦è¾ƒä½)
	{ id = "mime", url = "*/", run = "mime.dir", prio = "high" },
	{ id = "mime", url = "local://*", run = "mime.local", prio = "high" },
	{ id = "mime", url = "remote://*", run = "mime.remote", prio = "high" },
]

# ----- æ–‡ä»¶æ£€æµ‹å™¨ (Spotters) -----
spotters = [
	{ url = "*/", run = "folder" },
	
	# ä»£ç æ–‡ä»¶
	{ mime = "text/*", run = "code" },
	{ mime = "application/{mbox,javascript,wine-extension-ini}", run = "code" },
	
	# å›¾ç‰‡æ–‡ä»¶
	{ mime = "image/{avif,hei?,jxl}", run = "magick" },
	{ mime = "image/svg+xml", run = "svg" },
	{ mime = "image/*", run = "image" },
	
	# è§†é¢‘æ–‡ä»¶
	{ mime = "video/*", run = "video" },
	
	# è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
	{ mime = "vfs/*", run = "vfs" },
	
	# é”™è¯¯å¤„ç†
	{ mime = "null/*", run = "null" },
	
	# é»˜è®¤
	{ url = "*", run = "file" },
]

# ----- é¢„åŠ è½½å™¨ (Preloaders) - åœ¨æµè§ˆæ—¶æå‰åŠ è½½ -----
preloaders = [
	# å›¾ç‰‡é¢„åŠ è½½
	{ mime = "image/{avif,hei?,jxl}", run = "magick" },
	{ mime = "image/svg+xml", run = "svg" },
	{ mime = "image/*", run = "image" },
	
	# è§†é¢‘é¢„åŠ è½½
	{ mime = "video/*", run = "video" },
	
	# PDF é¢„åŠ è½½
	{ mime = "application/pdf", run = "pdf" },
	
	# å­—ä½“é¢„åŠ è½½
	{ mime = "font/*", run = "font" },
	{ mime = "application/ms-opentype", run = "font" },
]

# ----- é¢„è§ˆå™¨é…ç½® (Previewers) - ä½¿ç”¨ piper.yazi å¢å¼ºé¢„è§ˆ -----
# ğŸ’¡ prepend_previewers: ä¼˜å…ˆçº§æœ€é«˜,ä¼šè¦†ç›–é»˜è®¤é¢„è§ˆå™¨
[[plugin.prepend_previewers]]
# Markdown é¢„è§ˆ - ä½¿ç”¨ glow æ¸²æŸ“
url = "*.md"
run = 'piper -- CLICOLOR_FORCE=1 glow -w=$w -s=dark "$1"'

[[plugin.prepend_previewers]]
# CSV é¢„è§ˆ - ä½¿ç”¨ bat è¯­æ³•é«˜äº®
url = "*.csv"
run = 'piper -- bat -p --color=always "$1"'

[[plugin.prepend_previewers]]
# Tarball é¢„è§ˆ - æ˜¾ç¤ºå‹ç¼©åŒ…å†…å®¹
url = "*.tar*"
run = 'piper --format=url -- tar tf "$1"'

[[plugin.prepend_previewers]]
# ç›®å½•æ ‘é¢„è§ˆ - ä½¿ç”¨ eza æ˜¾ç¤ºç›®å½•ç»“æ„
url = "*/"
run = 'piper -- eza -TL=3 --color=always --icons=always --group-directories-first --no-quotes "$1"'

[[plugin.prepend_previewers]]
# SQLite æ•°æ®åº“é¢„è§ˆ - æ˜¾ç¤ºæ•°æ®åº“ç»“æ„
mime = "application/sqlite3"
run = 'piper -- sqlite3 "$1" ".schema --indent"'

# ğŸ’¡ é»˜è®¤é¢„è§ˆå™¨é…ç½®
previewers = [
	{ url = "*/", run = "folder" },
	
	# ä»£ç é¢„è§ˆ
	{ mime = "text/*", run = "code" },
	{ mime = "application/{mbox,javascript,wine-extension-ini}", run = "code" },
	
	# JSON é¢„è§ˆ
	{ mime = "application/{json,ndjson}", run = "json" },
	
	# å›¾ç‰‡é¢„è§ˆ
	{ mime = "image/{avif,hei?,jxl}", run = "magick" },
	{ mime = "image/svg+xml", run = "svg" },
	{ mime = "image/*", run = "image" },
	
	# è§†é¢‘é¢„è§ˆ
	{ mime = "video/*", run = "video" },
	
	# PDF é¢„è§ˆ
	{ mime = "application/pdf", run = "pdf" },
	
	# å‹ç¼©åŒ…é¢„è§ˆ
	{ mime = "application/{zip,rar,7z*,tar,gzip,xz,zstd,bzip*,lzma,compress,archive,cpio,arj,xar,ms-cab*}", run = "archive" },
	{ mime = "application/{debian*-package,redhat-package-manager,rpm,android.package-archive}", run = "archive" },
	{ url = "*.{AppImage,appimage}", run = "archive" },
	
	# è™šæ‹Ÿç£ç›˜/å…‰ç›˜é•œåƒ
	{ mime = "application/{iso9660-image,qemu-disk,ms-wim,apple-diskimage}", run = "archive" },
	{ mime = "application/virtualbox-{vhd,vhdx}", run = "archive" },
	{ url = "*.{img,fat,ext,ext2,ext3,ext4,squashfs,ntfs,hfs,hfsx}", run = "archive" },
	
	# å­—ä½“é¢„è§ˆ
	{ mime = "font/*", run = "font" },
	{ mime = "application/ms-opentype", run = "font" },
	
	# ç©ºæ–‡ä»¶
	{ mime = "inode/empty", run = "empty" },
	
	# è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ
	{ mime = "vfs/*", run = "vfs" },
	
	# é”™è¯¯å¤„ç†
	{ mime = "null/*", run = "null" },
	
	# é»˜è®¤é¢„è§ˆå™¨
	{ url = "*", run = "file" },
]

# ğŸ’¡ append_previewers: ä½œä¸ºåå¤‡é¢„è§ˆå™¨,å½“æ²¡æœ‰åŒ¹é…çš„é¢„è§ˆå™¨æ—¶ä½¿ç”¨
[[plugin.append_previewers]]
# ä½¿ç”¨ hexyl ä½œä¸ºåå¤‡é¢„è§ˆå™¨(åå…­è¿›åˆ¶æŸ¥çœ‹å™¨)
url = "*"
run = 'piper -- hexyl --border=none --terminal-width=$w "$1"'

# ===== è¾“å…¥æ¡†é…ç½® [input] =====
[input]
# ğŸ’¡ å…‰æ ‡é—ªçƒ
cursor_blink = false

# ----- cd (åˆ‡æ¢ç›®å½•) -----
cd_title = "åˆ‡æ¢ç›®å½•:"
cd_origin = "top-center"
cd_offset = [0, 2, 50, 3]

# ----- create (åˆ›å»ºæ–‡ä»¶/ç›®å½•) -----
create_title = ["åˆ›å»º:", "åˆ›å»ºç›®å½•:"]
create_origin = "top-center"
create_offset = [0, 2, 50, 3]

# ----- rename (é‡å‘½å) -----
rename_title = "é‡å‘½å:"
rename_origin = "hovered"
rename_offset = [0, 1, 50, 3]

# ----- filter (è¿‡æ»¤) -----
filter_title = "è¿‡æ»¤:"
filter_origin = "top-center"
filter_offset = [0, 2, 50, 3]

# ----- find (æŸ¥æ‰¾) -----
find_title = ["æŸ¥æ‰¾ä¸‹ä¸€ä¸ª:", "æŸ¥æ‰¾ä¸Šä¸€ä¸ª:"]
find_origin = "top-center"
find_offset = [0, 2, 50, 3]

# ----- search (æœç´¢) -----
search_title = "é€šè¿‡ {n} æœç´¢:"
search_origin = "top-center"
search_offset = [0, 2, 50, 3]

# ----- shell (æ‰§è¡Œå‘½ä»¤) -----
shell_title = ["Shell:", "Shell (é˜»å¡):"]
shell_origin = "top-center"
shell_offset = [0, 2, 50, 3]

# ===== ç¡®è®¤å¯¹è¯æ¡†é…ç½® [confirm] =====
[confirm]
# ----- trash (ç§»è‡³å›æ”¶ç«™) -----
trash_title = "å°† {n} ä¸ªé€‰ä¸­çš„æ–‡ä»¶ç§»è‡³å›æ”¶ç«™?"
trash_origin = "center"
trash_offset = [0, 0, 70, 20]

# ----- delete (æ°¸ä¹…åˆ é™¤) -----
delete_title = "æ°¸ä¹…åˆ é™¤ {n} ä¸ªé€‰ä¸­çš„æ–‡ä»¶?"
delete_origin = "center"
delete_offset = [0, 0, 70, 20]

# ----- overwrite (è¦†ç›–æ–‡ä»¶) -----
overwrite_title = "è¦†ç›–æ–‡ä»¶?"
overwrite_body = "å°†è¦†ç›–ä»¥ä¸‹æ–‡ä»¶:"
overwrite_origin = "center"
overwrite_offset = [0, 0, 50, 15]

# ----- quit (é€€å‡º) -----
quit_title = "é€€å‡º?"
quit_body = "æœ‰æœªå®Œæˆçš„ä»»åŠ¡,ä»è¦é€€å‡ºå—?\n(ä½¿ç”¨é»˜è®¤å¿«æ·é”® 'w' æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨)"
quit_origin = "center"
quit_offset = [0, 0, 50, 15]

# ===== é€‰æ‹©å™¨é…ç½® [pick] =====
[pick]
open_title = "æ‰“å¼€æ–¹å¼:"
open_origin = "hovered"
open_offset = [0, 1, 50, 7]

# ===== Which-key é…ç½® [which] =====
[which]
# ğŸ’¡ å¿«æ·é”®æç¤ºæ’åºæ–¹å¼
sort_by = "none"
sort_sensitive = false
sort_reverse = false
sort_translit = false
